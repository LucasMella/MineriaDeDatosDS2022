<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lucas Mella">

<title>Taller 4</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="Taller 4_files/libs/clipboard/clipboard.min.js"></script>
<script src="Taller 4_files/libs/quarto-html/quarto.js"></script>
<script src="Taller 4_files/libs/quarto-html/popper.min.js"></script>
<script src="Taller 4_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Taller 4_files/libs/quarto-html/anchor.min.js"></script>
<link href="Taller 4_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Taller 4_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Taller 4_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Taller 4_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Taller 4_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Taller 4</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Lucas Mella </p>
          </div>
  </div>
    
    
  </div>
  

</header>

<section id="taller-4-transformación-de-datos-y-visualización." class="level1">
<h1>Taller 4: Transformación de datos y visualización.</h1>
<p>##Carga de Librerías</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ggplot2' was built under R version 4.2.2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyr' was built under R version 4.2.2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'dplyr' was built under R version 4.2.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'lubridate' was built under R version 4.2.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: timechange</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'timechange' was built under R version 4.2.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'lubridate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    date, intersect, setdiff, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'readr' was built under R version 4.2.2</code></pre>
</div>
</div>
<p>##Carga de datos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Mascaras</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>mask_agv <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"../data/data_raw/station_id_agv_Lucas.rds"</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>mask_agromet <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"../data/data_raw/station_id_agromet_Lucas.rds"</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Sets de datos</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>agv_meta <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"../data/data_raw/metadata_estaciones_agvAPI.rds"</span>)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>api_agv <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"../data/data_raw/data_agvAPI.rds"</span>)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>api_agromet <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"../data/data_raw/data_estaciones_agrometAPI.rds"</span>)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>agromet_meta <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"../data/data_raw/metadata_estaciones_agrometAPI.rds"</span>)</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="co">#Aplicación de máscaras</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>agromet_meta <span class="ot">&lt;-</span> agromet_meta[agromet_meta<span class="sc">$</span>ema <span class="sc">%in%</span> mask_agromet,]</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>agv_meta <span class="ot">&lt;-</span> agv_meta[agv_meta<span class="sc">$</span>serial <span class="sc">%in%</span> mask_agv,]</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>api_agromet <span class="ot">&lt;-</span> api_agromet[api_agromet<span class="sc">$</span>station_id <span class="sc">%in%</span> mask_agromet,]</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>api_agv_rows <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">rownames</span>(agv_meta[agv_meta<span class="sc">$</span>serial <span class="sc">%in%</span> mask_agv,]))</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>api_agv <span class="ot">&lt;-</span> api_agv[<span class="fu">c</span>(api_agv_rows)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="ejercicios-funciones" class="level2">
<h2 class="anchored" data-anchor-id="ejercicios-funciones">Ejercicios funciones</h2>
<section id="eliminar-valores-anómalos" class="level3">
<h3 class="anchored" data-anchor-id="eliminar-valores-anómalos">Eliminar valores anómalos</h3>
<ul>
<li>Cree una función nombrada en R que permita tranformar en NA los valores anómalos de una variable <code>x</code>, si se encuentra fuera del rango:</li>
</ul>
<p><span class="math display">\[Q_{25} -1.5\cdot IQR &lt; x &lt; Q_{75}+IQR\]</span></p>
<p>dónde <span class="math inline">\(Q_{25}\)</span>: cuantil <span class="math inline">\(25\%\)</span>, <span class="math inline">\(IQR\)</span>: rango intercuartil y <span class="math inline">\(Q_{75}\)</span>: cuantil <span class="math inline">\(75\%\)</span></p>
<p>La función debe transformar en NA los valores que se encuentran fuera del rango.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>anomalos <span class="ot">&lt;-</span> <span class="cf">function</span>(x,...){</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  lim_inf <span class="ot">&lt;-</span> <span class="fu">quantile</span>(x,.<span class="dv">25</span>,...) <span class="sc">-</span> <span class="fl">1.5</span><span class="sc">*</span><span class="fu">IQR</span>(x,...)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  lim_sup <span class="ot">&lt;-</span> <span class="fu">quantile</span>(x,.<span class="dv">75</span>,...) <span class="sc">+</span> <span class="fl">1.5</span><span class="sc">*</span><span class="fu">IQR</span>(x,...)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  x[x <span class="sc">&lt;</span> lim_inf <span class="sc">|</span> x <span class="sc">&gt;</span> lim_sup] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Pruebe la función con un vector numérico creado por usted.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>vector1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>))</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">anomalos</span>(vector1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] -0.045941934  0.885471516 -1.126894549  0.353752920  2.071046802
  [6] -0.749270179 -0.716694918 -1.931560002 -1.115254492 -1.777106739
 [11] -1.667821641  0.689194245 -0.426233025 -0.438620165  0.691268270
 [16] -2.894736393 -1.015756046  1.661606373 -1.542871549 -1.087251171
 [21] -0.428146611 -0.573506274  0.324471330 -2.223054436 -0.521094044
 [26]  1.229817338  1.645865307  0.773061839 -0.615799732 -1.565599209
 [31] -0.140415905 -1.192470155  2.003854805  1.931565912  1.580276350
 [36] -0.776715346 -0.258667966 -0.674100753  0.006431917 -2.662892796
 [41]  0.277235292  0.307550654 -0.422822208  0.038084404  0.134532516
 [46] -0.087424592  1.134703312  0.450916644 -0.241488837 -0.641340928
 [51] -0.446471861  0.126458901  1.330334934 -1.825508665  0.050733431
 [56]  1.068627886 -0.632016881  2.156114145 -1.980878644 -0.333395931
 [61] -1.384431881 -0.496294384 -0.051858445 -0.156420598 -0.929201778
 [66] -1.467984154  2.265238413  0.877357198 -0.337389705  0.047909344
 [71]  1.449685896  1.559444587  0.857233688 -0.349707969 -1.167020855
 [76] -1.161450925  1.661002960  0.754384977 -1.243138977  0.233779014
 [81]  1.779802507  0.479508610 -0.119537680  0.747738748 -0.794076292
 [86] -0.879228484 -2.966441279 -0.162754210  0.783243875  2.649828440
 [91] -0.206680528 -0.552626866  1.537576589  0.365079763  1.088350099
 [96]  0.022007761  0.272421909  0.148301843 -0.604060478  2.352882574</code></pre>
</div>
</div>
<ul>
<li>Pruebe la función utilizando <code>mutate</code> con el set de datos <code>iris</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span>   </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(is.numeric, anomalos,<span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Use of bare predicate functions was deprecated in tidyselect 1.1.0.
ℹ Please use wrap predicates in `where()` instead.
  # Was:
  data %&gt;% select(is.numeric)

  # Now:
  data %&gt;% select(where(is.numeric))</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
1            5.1         3.5          1.4         0.2     setosa
2            4.9         3.0          1.4         0.2     setosa
3            4.7         3.2          1.3         0.2     setosa
4            4.6         3.1          1.5         0.2     setosa
5            5.0         3.6          1.4         0.2     setosa
6            5.4         3.9          1.7         0.4     setosa
7            4.6         3.4          1.4         0.3     setosa
8            5.0         3.4          1.5         0.2     setosa
9            4.4         2.9          1.4         0.2     setosa
10           4.9         3.1          1.5         0.1     setosa
11           5.4         3.7          1.5         0.2     setosa
12           4.8         3.4          1.6         0.2     setosa
13           4.8         3.0          1.4         0.1     setosa
14           4.3         3.0          1.1         0.1     setosa
15           5.8         4.0          1.2         0.2     setosa
16           5.7          NA          1.5         0.4     setosa
17           5.4         3.9          1.3         0.4     setosa
18           5.1         3.5          1.4         0.3     setosa
19           5.7         3.8          1.7         0.3     setosa
20           5.1         3.8          1.5         0.3     setosa
21           5.4         3.4          1.7         0.2     setosa
22           5.1         3.7          1.5         0.4     setosa
23           4.6         3.6          1.0         0.2     setosa
24           5.1         3.3          1.7         0.5     setosa
25           4.8         3.4          1.9         0.2     setosa
26           5.0         3.0          1.6         0.2     setosa
27           5.0         3.4          1.6         0.4     setosa
28           5.2         3.5          1.5         0.2     setosa
29           5.2         3.4          1.4         0.2     setosa
30           4.7         3.2          1.6         0.2     setosa
31           4.8         3.1          1.6         0.2     setosa
32           5.4         3.4          1.5         0.4     setosa
33           5.2          NA          1.5         0.1     setosa
34           5.5          NA          1.4         0.2     setosa
35           4.9         3.1          1.5         0.2     setosa
36           5.0         3.2          1.2         0.2     setosa
37           5.5         3.5          1.3         0.2     setosa
38           4.9         3.6          1.4         0.1     setosa
39           4.4         3.0          1.3         0.2     setosa
40           5.1         3.4          1.5         0.2     setosa
41           5.0         3.5          1.3         0.3     setosa
42           4.5         2.3          1.3         0.3     setosa
43           4.4         3.2          1.3         0.2     setosa
44           5.0         3.5          1.6         0.6     setosa
45           5.1         3.8          1.9         0.4     setosa
46           4.8         3.0          1.4         0.3     setosa
47           5.1         3.8          1.6         0.2     setosa
48           4.6         3.2          1.4         0.2     setosa
49           5.3         3.7          1.5         0.2     setosa
50           5.0         3.3          1.4         0.2     setosa
51           7.0         3.2          4.7         1.4 versicolor
52           6.4         3.2          4.5         1.5 versicolor
53           6.9         3.1          4.9         1.5 versicolor
54           5.5         2.3          4.0         1.3 versicolor
55           6.5         2.8          4.6         1.5 versicolor
56           5.7         2.8          4.5         1.3 versicolor
57           6.3         3.3          4.7         1.6 versicolor
58           4.9         2.4          3.3         1.0 versicolor
59           6.6         2.9          4.6         1.3 versicolor
60           5.2         2.7          3.9         1.4 versicolor
61           5.0          NA          3.5         1.0 versicolor
62           5.9         3.0          4.2         1.5 versicolor
63           6.0         2.2          4.0         1.0 versicolor
64           6.1         2.9          4.7         1.4 versicolor
65           5.6         2.9          3.6         1.3 versicolor
66           6.7         3.1          4.4         1.4 versicolor
67           5.6         3.0          4.5         1.5 versicolor
68           5.8         2.7          4.1         1.0 versicolor
69           6.2         2.2          4.5         1.5 versicolor
70           5.6         2.5          3.9         1.1 versicolor
71           5.9         3.2          4.8         1.8 versicolor
72           6.1         2.8          4.0         1.3 versicolor
73           6.3         2.5          4.9         1.5 versicolor
74           6.1         2.8          4.7         1.2 versicolor
75           6.4         2.9          4.3         1.3 versicolor
76           6.6         3.0          4.4         1.4 versicolor
77           6.8         2.8          4.8         1.4 versicolor
78           6.7         3.0          5.0         1.7 versicolor
79           6.0         2.9          4.5         1.5 versicolor
80           5.7         2.6          3.5         1.0 versicolor
81           5.5         2.4          3.8         1.1 versicolor
82           5.5         2.4          3.7         1.0 versicolor
83           5.8         2.7          3.9         1.2 versicolor
84           6.0         2.7          5.1         1.6 versicolor
85           5.4         3.0          4.5         1.5 versicolor
86           6.0         3.4          4.5         1.6 versicolor
87           6.7         3.1          4.7         1.5 versicolor
88           6.3         2.3          4.4         1.3 versicolor
89           5.6         3.0          4.1         1.3 versicolor
90           5.5         2.5          4.0         1.3 versicolor
91           5.5         2.6          4.4         1.2 versicolor
92           6.1         3.0          4.6         1.4 versicolor
93           5.8         2.6          4.0         1.2 versicolor
94           5.0         2.3          3.3         1.0 versicolor
95           5.6         2.7          4.2         1.3 versicolor
96           5.7         3.0          4.2         1.2 versicolor
97           5.7         2.9          4.2         1.3 versicolor
98           6.2         2.9          4.3         1.3 versicolor
99           5.1         2.5          3.0         1.1 versicolor
100          5.7         2.8          4.1         1.3 versicolor
101          6.3         3.3          6.0         2.5  virginica
102          5.8         2.7          5.1         1.9  virginica
103          7.1         3.0          5.9         2.1  virginica
104          6.3         2.9          5.6         1.8  virginica
105          6.5         3.0          5.8         2.2  virginica
106          7.6         3.0          6.6         2.1  virginica
107          4.9         2.5          4.5         1.7  virginica
108          7.3         2.9          6.3         1.8  virginica
109          6.7         2.5          5.8         1.8  virginica
110          7.2         3.6          6.1         2.5  virginica
111          6.5         3.2          5.1         2.0  virginica
112          6.4         2.7          5.3         1.9  virginica
113          6.8         3.0          5.5         2.1  virginica
114          5.7         2.5          5.0         2.0  virginica
115          5.8         2.8          5.1         2.4  virginica
116          6.4         3.2          5.3         2.3  virginica
117          6.5         3.0          5.5         1.8  virginica
118          7.7         3.8          6.7         2.2  virginica
119          7.7         2.6          6.9         2.3  virginica
120          6.0         2.2          5.0         1.5  virginica
121          6.9         3.2          5.7         2.3  virginica
122          5.6         2.8          4.9         2.0  virginica
123          7.7         2.8          6.7         2.0  virginica
124          6.3         2.7          4.9         1.8  virginica
125          6.7         3.3          5.7         2.1  virginica
126          7.2         3.2          6.0         1.8  virginica
127          6.2         2.8          4.8         1.8  virginica
128          6.1         3.0          4.9         1.8  virginica
129          6.4         2.8          5.6         2.1  virginica
130          7.2         3.0          5.8         1.6  virginica
131          7.4         2.8          6.1         1.9  virginica
132          7.9         3.8          6.4         2.0  virginica
133          6.4         2.8          5.6         2.2  virginica
134          6.3         2.8          5.1         1.5  virginica
135          6.1         2.6          5.6         1.4  virginica
136          7.7         3.0          6.1         2.3  virginica
137          6.3         3.4          5.6         2.4  virginica
138          6.4         3.1          5.5         1.8  virginica
139          6.0         3.0          4.8         1.8  virginica
140          6.9         3.1          5.4         2.1  virginica
141          6.7         3.1          5.6         2.4  virginica
142          6.9         3.1          5.1         2.3  virginica
143          5.8         2.7          5.1         1.9  virginica
144          6.8         3.2          5.9         2.3  virginica
145          6.7         3.3          5.7         2.5  virginica
146          6.7         3.0          5.2         2.3  virginica
147          6.3         2.5          5.0         1.9  virginica
148          6.5         3.0          5.2         2.0  virginica
149          6.2         3.4          5.4         2.3  virginica
150          5.9         3.0          5.1         1.8  virginica</code></pre>
</div>
</div>
<ul>
<li>Transforme la función en una función anónima (lambda) y úsela con <code>mutate</code> con los datos <code>iris</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">|&gt;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric),<span class="at">.fns=</span>\(x,y) x<span class="sc">/</span><span class="fu">sqrt</span>(<span class="fu">mean</span>(y)), <span class="at">y =</span> iris<span class="sc">$</span>Sepal.Width))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 150 × 5
# Groups:   Species [3]
   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  
 1         2.92        2.00        0.801      0.114  setosa 
 2         2.80        1.72        0.801      0.114  setosa 
 3         2.69        1.83        0.743      0.114  setosa 
 4         2.63        1.77        0.858      0.114  setosa 
 5         2.86        2.06        0.801      0.114  setosa 
 6         3.09        2.23        0.972      0.229  setosa 
 7         2.63        1.94        0.801      0.172  setosa 
 8         2.86        1.94        0.858      0.114  setosa 
 9         2.52        1.66        0.801      0.114  setosa 
10         2.80        1.77        0.858      0.0572 setosa 
# … with 140 more rows</code></pre>
</div>
</div>
<ul>
<li>Utilice la función para eliminar valores anómalos del set de datos <code>agromet</code> en todas las variables climáticas, salvo en <code>grados_dias</code> y <code>horas_frio</code>, use la función como anónima.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>anoapi_agromet <span class="ot">&lt;-</span> api_agromet <span class="sc">|&gt;</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(is.numeric, anomalos,<span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="función-para-dplyr-ej.-mutate-con-multiples-columnas-como-argumentos" class="level3">
<h3 class="anchored" data-anchor-id="función-para-dplyr-ej.-mutate-con-multiples-columnas-como-argumentos">Función para <code>{dplyr}</code> (ej., <code>mutate</code>) con multiples columnas como argumentos</h3>
<ul>
<li>Utilizando el set de datos <code>iris</code> y <code>mutate</code> haga el calculo en que cada columna numérica sea dividida por la raiz cuadrada de el promedio de <code>Sepal.Lenght</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>rqmean <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="fu">sqrt</span>(iris<span class="sc">$</span>Sepal.Length))</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span> </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(is.numeric))<span class="sc">/</span>rqmean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in Ops.factor(left, right): '/' not meaningful for factors</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1       2.115026   1.4514885    0.5805954   0.0829422      NA
2       2.032084   1.2441330    0.5805954   0.0829422      NA
3       1.949142   1.3270752    0.5391243   0.0829422      NA
4       1.907671   1.2856041    0.6220665   0.0829422      NA
5       2.073555   1.4929596    0.5805954   0.0829422      NA
6       2.239439   1.6173729    0.7050087   0.1658844      NA
7       1.907671   1.4100174    0.5805954   0.1244133      NA
8       2.073555   1.4100174    0.6220665   0.0829422      NA
9       1.824728   1.2026619    0.5805954   0.0829422      NA
10      2.032084   1.2856041    0.6220665   0.0414711      NA
11      2.239439   1.5344307    0.6220665   0.0829422      NA
12      1.990613   1.4100174    0.6635376   0.0829422      NA
13      1.990613   1.2441330    0.5805954   0.0414711      NA
14      1.783257   1.2441330    0.4561821   0.0414711      NA
15      2.405324   1.6588440    0.4976532   0.0829422      NA
16      2.363853   1.8247284    0.6220665   0.1658844      NA
17      2.239439   1.6173729    0.5391243   0.1658844      NA
18      2.115026   1.4514885    0.5805954   0.1244133      NA
19      2.363853   1.5759018    0.7050087   0.1244133      NA
20      2.115026   1.5759018    0.6220665   0.1244133      NA
21      2.239439   1.4100174    0.7050087   0.0829422      NA
22      2.115026   1.5344307    0.6220665   0.1658844      NA
23      1.907671   1.4929596    0.4147110   0.0829422      NA
24      2.115026   1.3685463    0.7050087   0.2073555      NA
25      1.990613   1.4100174    0.7879509   0.0829422      NA
26      2.073555   1.2441330    0.6635376   0.0829422      NA
27      2.073555   1.4100174    0.6635376   0.1658844      NA
28      2.156497   1.4514885    0.6220665   0.0829422      NA
29      2.156497   1.4100174    0.5805954   0.0829422      NA
30      1.949142   1.3270752    0.6635376   0.0829422      NA
31      1.990613   1.2856041    0.6635376   0.0829422      NA
32      2.239439   1.4100174    0.6220665   0.1658844      NA
33      2.156497   1.7003151    0.6220665   0.0414711      NA
34      2.280911   1.7417862    0.5805954   0.0829422      NA
35      2.032084   1.2856041    0.6220665   0.0829422      NA
36      2.073555   1.3270752    0.4976532   0.0829422      NA
37      2.280911   1.4514885    0.5391243   0.0829422      NA
38      2.032084   1.4929596    0.5805954   0.0414711      NA
39      1.824728   1.2441330    0.5391243   0.0829422      NA
40      2.115026   1.4100174    0.6220665   0.0829422      NA
41      2.073555   1.4514885    0.5391243   0.1244133      NA
42      1.866200   0.9538353    0.5391243   0.1244133      NA
43      1.824728   1.3270752    0.5391243   0.0829422      NA
44      2.073555   1.4514885    0.6635376   0.2488266      NA
45      2.115026   1.5759018    0.7879509   0.1658844      NA
46      1.990613   1.2441330    0.5805954   0.1244133      NA
47      2.115026   1.5759018    0.6635376   0.0829422      NA
48      1.907671   1.3270752    0.5805954   0.0829422      NA
49      2.197968   1.5344307    0.6220665   0.0829422      NA
50      2.073555   1.3685463    0.5805954   0.0829422      NA
51      2.902977   1.3270752    1.9491418   0.5805954      NA
52      2.654150   1.3270752    1.8661995   0.6220665      NA
53      2.861506   1.2856041    2.0320840   0.6220665      NA
54      2.280911   0.9538353    1.6588440   0.5391243      NA
55      2.695622   1.1611908    1.9076706   0.6220665      NA
56      2.363853   1.1611908    1.8661995   0.5391243      NA
57      2.612679   1.3685463    1.9491418   0.6635376      NA
58      2.032084   0.9953064    1.3685463   0.4147110      NA
59      2.737093   1.2026619    1.9076706   0.5391243      NA
60      2.156497   1.1197197    1.6173729   0.5805954      NA
61      2.073555   0.8294220    1.4514885   0.4147110      NA
62      2.446795   1.2441330    1.7417862   0.6220665      NA
63      2.488266   0.9123642    1.6588440   0.4147110      NA
64      2.529737   1.2026619    1.9491418   0.5805954      NA
65      2.322382   1.2026619    1.4929596   0.5391243      NA
66      2.778564   1.2856041    1.8247284   0.5805954      NA
67      2.322382   1.2441330    1.8661995   0.6220665      NA
68      2.405324   1.1197197    1.7003151   0.4147110      NA
69      2.571208   0.9123642    1.8661995   0.6220665      NA
70      2.322382   1.0367775    1.6173729   0.4561821      NA
71      2.446795   1.3270752    1.9906129   0.7464798      NA
72      2.529737   1.1611908    1.6588440   0.5391243      NA
73      2.612679   1.0367775    2.0320840   0.6220665      NA
74      2.529737   1.1611908    1.9491418   0.4976532      NA
75      2.654150   1.2026619    1.7832573   0.5391243      NA
76      2.737093   1.2441330    1.8247284   0.5805954      NA
77      2.820035   1.1611908    1.9906129   0.5805954      NA
78      2.778564   1.2441330    2.0735551   0.7050087      NA
79      2.488266   1.2026619    1.8661995   0.6220665      NA
80      2.363853   1.0782486    1.4514885   0.4147110      NA
81      2.280911   0.9953064    1.5759018   0.4561821      NA
82      2.280911   0.9953064    1.5344307   0.4147110      NA
83      2.405324   1.1197197    1.6173729   0.4976532      NA
84      2.488266   1.1197197    2.1150262   0.6635376      NA
85      2.239439   1.2441330    1.8661995   0.6220665      NA
86      2.488266   1.4100174    1.8661995   0.6635376      NA
87      2.778564   1.2856041    1.9491418   0.6220665      NA
88      2.612679   0.9538353    1.8247284   0.5391243      NA
89      2.322382   1.2441330    1.7003151   0.5391243      NA
90      2.280911   1.0367775    1.6588440   0.5391243      NA
91      2.280911   1.0782486    1.8247284   0.4976532      NA
92      2.529737   1.2441330    1.9076706   0.5805954      NA
93      2.405324   1.0782486    1.6588440   0.4976532      NA
94      2.073555   0.9538353    1.3685463   0.4147110      NA
95      2.322382   1.1197197    1.7417862   0.5391243      NA
96      2.363853   1.2441330    1.7417862   0.4976532      NA
97      2.363853   1.2026619    1.7417862   0.5391243      NA
98      2.571208   1.2026619    1.7832573   0.5391243      NA
99      2.115026   1.0367775    1.2441330   0.4561821      NA
100     2.363853   1.1611908    1.7003151   0.5391243      NA
101     2.612679   1.3685463    2.4882661   1.0367775      NA
102     2.405324   1.1197197    2.1150262   0.7879509      NA
103     2.944448   1.2441330    2.4467950   0.8708931      NA
104     2.612679   1.2026619    2.3223817   0.7464798      NA
105     2.695622   1.2441330    2.4053239   0.9123642      NA
106     3.151804   1.2441330    2.7370927   0.8708931      NA
107     2.032084   1.0367775    1.8661995   0.7050087      NA
108     3.027390   1.2026619    2.6126794   0.7464798      NA
109     2.778564   1.0367775    2.4053239   0.7464798      NA
110     2.985919   1.4929596    2.5297372   1.0367775      NA
111     2.695622   1.3270752    2.1150262   0.8294220      NA
112     2.654150   1.1197197    2.1979684   0.7879509      NA
113     2.820035   1.2441330    2.2809106   0.8708931      NA
114     2.363853   1.0367775    2.0735551   0.8294220      NA
115     2.405324   1.1611908    2.1150262   0.9953064      NA
116     2.654150   1.3270752    2.1979684   0.9538353      NA
117     2.695622   1.2441330    2.2809106   0.7464798      NA
118     3.193275   1.5759018    2.7785638   0.9123642      NA
119     3.193275   1.0782486    2.8615060   0.9538353      NA
120     2.488266   0.9123642    2.0735551   0.6220665      NA
121     2.861506   1.3270752    2.3638528   0.9538353      NA
122     2.322382   1.1611908    2.0320840   0.8294220      NA
123     3.193275   1.1611908    2.7785638   0.8294220      NA
124     2.612679   1.1197197    2.0320840   0.7464798      NA
125     2.778564   1.3685463    2.3638528   0.8708931      NA
126     2.985919   1.3270752    2.4882661   0.7464798      NA
127     2.571208   1.1611908    1.9906129   0.7464798      NA
128     2.529737   1.2441330    2.0320840   0.7464798      NA
129     2.654150   1.1611908    2.3223817   0.8708931      NA
130     2.985919   1.2441330    2.4053239   0.6635376      NA
131     3.068861   1.1611908    2.5297372   0.7879509      NA
132     3.276217   1.5759018    2.6541505   0.8294220      NA
133     2.654150   1.1611908    2.3223817   0.9123642      NA
134     2.612679   1.1611908    2.1150262   0.6220665      NA
135     2.529737   1.0782486    2.3223817   0.5805954      NA
136     3.193275   1.2441330    2.5297372   0.9538353      NA
137     2.612679   1.4100174    2.3223817   0.9953064      NA
138     2.654150   1.2856041    2.2809106   0.7464798      NA
139     2.488266   1.2441330    1.9906129   0.7464798      NA
140     2.861506   1.2856041    2.2394395   0.8708931      NA
141     2.778564   1.2856041    2.3223817   0.9953064      NA
142     2.861506   1.2856041    2.1150262   0.9538353      NA
143     2.405324   1.1197197    2.1150262   0.7879509      NA
144     2.820035   1.3270752    2.4467950   0.9538353      NA
145     2.778564   1.3685463    2.3638528   1.0367775      NA
146     2.778564   1.2441330    2.1564973   0.9538353      NA
147     2.612679   1.0367775    2.0735551   0.7879509      NA
148     2.695622   1.2441330    2.1564973   0.8294220      NA
149     2.571208   1.4100174    2.2394395   0.9538353      NA
150     2.446795   1.2441330    2.1150262   0.7464798      NA</code></pre>
</div>
</div>
<ul>
<li>Utilice <code>across</code> y <code>mutate</code> junto con una función anónima (lambda)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">|&gt;</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric),<span class="at">.fns =</span> \(x) x<span class="sc">/</span>rqmean))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 150 × 5
# Groups:   Species [3]
   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  
 1         2.12        1.45        0.581      0.0829 setosa 
 2         2.03        1.24        0.581      0.0829 setosa 
 3         1.95        1.33        0.539      0.0829 setosa 
 4         1.91        1.29        0.622      0.0829 setosa 
 5         2.07        1.49        0.581      0.0829 setosa 
 6         2.24        1.62        0.705      0.166  setosa 
 7         1.91        1.41        0.581      0.124  setosa 
 8         2.07        1.41        0.622      0.0829 setosa 
 9         1.82        1.20        0.581      0.0829 setosa 
10         2.03        1.29        0.622      0.0415 setosa 
# … with 140 more rows</code></pre>
</div>
</div>
<ul>
<li>Utilice <code>across</code> y <code>mutate</code> junto con una función nombrada (lambda)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>rqmeanfun <span class="ot">&lt;-</span> <span class="cf">function</span>(x,y){<span class="fu">group_by</span>(y) <span class="sc">|&gt;</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric))) <span class="sc">|&gt;</span> </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">rqmean_ =</span> x<span class="sc">/</span>rqmean)}</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rqmeanfun</span>(iris<span class="sc">$</span>Sepal.Width, iris[iris<span class="sc">$</span>Species,])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 150 × 6
   Sepal.Length Sepal.Width Petal.Length Petal.Width Species rqmean_
          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;     &lt;dbl&gt;
 1          5.1         3.5          1.4         0.2 setosa     1.45
 2          5.1         3.5          1.4         0.2 setosa     1.24
 3          5.1         3.5          1.4         0.2 setosa     1.33
 4          5.1         3.5          1.4         0.2 setosa     1.29
 5          5.1         3.5          1.4         0.2 setosa     1.49
 6          5.1         3.5          1.4         0.2 setosa     1.62
 7          5.1         3.5          1.4         0.2 setosa     1.41
 8          5.1         3.5          1.4         0.2 setosa     1.41
 9          5.1         3.5          1.4         0.2 setosa     1.20
10          5.1         3.5          1.4         0.2 setosa     1.29
# … with 140 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>rqmeanfun_<span class="ot">&lt;-</span> <span class="cf">function</span>(x,y,z){</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(z) <span class="sc">|&gt;</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric))) <span class="sc">|&gt;</span> </span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rqmean_ =</span> x<span class="sc">/</span><span class="fu">sqrt</span>(<span class="fu">mean</span>(y)))}</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="fu">rqmeanfun_</span>(iris<span class="sc">$</span>Sepal.Length, iris<span class="sc">$</span>Sepal.Width, iris[iris<span class="sc">$</span>Species,])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 150 × 6
   Sepal.Length Sepal.Width Petal.Length Petal.Width Species rqmean_
          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;     &lt;dbl&gt;
 1          5.1         3.5          1.4         0.2 setosa     2.92
 2          5.1         3.5          1.4         0.2 setosa     2.80
 3          5.1         3.5          1.4         0.2 setosa     2.69
 4          5.1         3.5          1.4         0.2 setosa     2.63
 5          5.1         3.5          1.4         0.2 setosa     2.86
 6          5.1         3.5          1.4         0.2 setosa     3.09
 7          5.1         3.5          1.4         0.2 setosa     2.63
 8          5.1         3.5          1.4         0.2 setosa     2.86
 9          5.1         3.5          1.4         0.2 setosa     2.52
10          5.1         3.5          1.4         0.2 setosa     2.80
# … with 140 more rows</code></pre>
</div>
</div>
</section>
<section id="resumir-por-rangos-tipo-categórica" class="level3">
<h3 class="anchored" data-anchor-id="resumir-por-rangos-tipo-categórica">Resumir por rangos tipo categórica</h3>
<ul>
<li>Cree una función que identifique tres grupos para un vector numérico <code>x</code>, alto, medio y bajo. Use la función <code>cut</code> y rangos de igual tamaño</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>clasifica <span class="ot">&lt;-</span> <span class="cf">function</span>(x,...){</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cut</span>(x,<span class="dv">3</span>, <span class="at">labels=</span><span class="fu">c</span>(<span class="st">'Low'</span>, <span class="st">'Med'</span>, <span class="st">'High'</span>))}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Pruebe la función con un vector numérico creado por usted.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">clasifica</span>(vector1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] Med  High Low  Med  High Med  Med  Low  Low  Low  Low  Med  Med  Med  Med 
 [16] Low  Med  High Low  Med  Med  Med  Med  Low  Med  High High Med  Med  Low 
 [31] Med  Low  High High High Med  Med  Med  Med  Low  Med  Med  Med  Med  Med 
 [46] Med  High Med  Med  Med  Med  Med  High Low  Med  High Med  High Low  Med 
 [61] Low  Med  Med  Med  Med  Low  High High Med  Med  High High High Med  Low 
 [76] Low  High Med  Low  Med  High Med  Med  Med  Med  Med  Low  Med  High High
 [91] Med  Med  High Med  High Med  Med  Med  Med  High
Levels: Low Med High</code></pre>
</div>
</div>
<ul>
<li>Pruebe la función utilizando <code>summarize</code> con el set de datos <code>iris</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric),<span class="at">.fns=</span>clasifica))  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
1            Low         Med          Low         Low     setosa
2            Low         Med          Low         Low     setosa
3            Low         Med          Low         Low     setosa
4            Low         Med          Low         Low     setosa
5            Low         Med          Low         Low     setosa
6            Low        High          Low         Low     setosa
7            Low         Med          Low         Low     setosa
8            Low         Med          Low         Low     setosa
9            Low         Med          Low         Low     setosa
10           Low         Med          Low         Low     setosa
11           Low        High          Low         Low     setosa
12           Low         Med          Low         Low     setosa
13           Low         Med          Low         Low     setosa
14           Low         Med          Low         Low     setosa
15           Med        High          Low         Low     setosa
16           Med        High          Low         Low     setosa
17           Low        High          Low         Low     setosa
18           Low         Med          Low         Low     setosa
19           Med        High          Low         Low     setosa
20           Low        High          Low         Low     setosa
21           Low         Med          Low         Low     setosa
22           Low        High          Low         Low     setosa
23           Low         Med          Low         Low     setosa
24           Low         Med          Low         Low     setosa
25           Low         Med          Low         Low     setosa
26           Low         Med          Low         Low     setosa
27           Low         Med          Low         Low     setosa
28           Low         Med          Low         Low     setosa
29           Low         Med          Low         Low     setosa
30           Low         Med          Low         Low     setosa
31           Low         Med          Low         Low     setosa
32           Low         Med          Low         Low     setosa
33           Low        High          Low         Low     setosa
34           Low        High          Low         Low     setosa
35           Low         Med          Low         Low     setosa
36           Low         Med          Low         Low     setosa
37           Low         Med          Low         Low     setosa
38           Low         Med          Low         Low     setosa
39           Low         Med          Low         Low     setosa
40           Low         Med          Low         Low     setosa
41           Low         Med          Low         Low     setosa
42           Low         Low          Low         Low     setosa
43           Low         Med          Low         Low     setosa
44           Low         Med          Low         Low     setosa
45           Low        High          Low         Low     setosa
46           Low         Med          Low         Low     setosa
47           Low        High          Low         Low     setosa
48           Low         Med          Low         Low     setosa
49           Low        High          Low         Low     setosa
50           Low         Med          Low         Low     setosa
51          High         Med          Med         Med versicolor
52           Med         Med          Med         Med versicolor
53          High         Med          Med         Med versicolor
54           Low         Low          Med         Med versicolor
55           Med         Low          Med         Med versicolor
56           Med         Low          Med         Med versicolor
57           Med         Med          Med         Med versicolor
58           Low         Low          Med         Med versicolor
59           Med         Med          Med         Med versicolor
60           Low         Low          Med         Med versicolor
61           Low         Low          Med         Med versicolor
62           Med         Med          Med         Med versicolor
63           Med         Low          Med         Med versicolor
64           Med         Med          Med         Med versicolor
65           Med         Med          Med         Med versicolor
66           Med         Med          Med         Med versicolor
67           Med         Med          Med         Med versicolor
68           Med         Low          Med         Med versicolor
69           Med         Low          Med         Med versicolor
70           Med         Low          Med         Med versicolor
71           Med         Med          Med        High versicolor
72           Med         Low          Med         Med versicolor
73           Med         Low          Med         Med versicolor
74           Med         Low          Med         Med versicolor
75           Med         Med          Med         Med versicolor
76           Med         Med          Med         Med versicolor
77          High         Low          Med         Med versicolor
78           Med         Med         High         Med versicolor
79           Med         Med          Med         Med versicolor
80           Med         Low          Med         Med versicolor
81           Low         Low          Med         Med versicolor
82           Low         Low          Med         Med versicolor
83           Med         Low          Med         Med versicolor
84           Med         Low         High         Med versicolor
85           Low         Med          Med         Med versicolor
86           Med         Med          Med         Med versicolor
87           Med         Med          Med         Med versicolor
88           Med         Low          Med         Med versicolor
89           Med         Med          Med         Med versicolor
90           Low         Low          Med         Med versicolor
91           Low         Low          Med         Med versicolor
92           Med         Med          Med         Med versicolor
93           Med         Low          Med         Med versicolor
94           Low         Low          Med         Med versicolor
95           Med         Low          Med         Med versicolor
96           Med         Med          Med         Med versicolor
97           Med         Med          Med         Med versicolor
98           Med         Med          Med         Med versicolor
99           Low         Low          Med         Med versicolor
100          Med         Low          Med         Med versicolor
101          Med         Med         High        High  virginica
102          Med         Low         High        High  virginica
103         High         Med         High        High  virginica
104          Med         Med         High        High  virginica
105          Med         Med         High        High  virginica
106         High         Med         High        High  virginica
107          Low         Low          Med         Med  virginica
108         High         Med         High        High  virginica
109          Med         Low         High        High  virginica
110         High         Med         High        High  virginica
111          Med         Med         High        High  virginica
112          Med         Low         High        High  virginica
113         High         Med         High        High  virginica
114          Med         Low         High        High  virginica
115          Med         Low         High        High  virginica
116          Med         Med         High        High  virginica
117          Med         Med         High        High  virginica
118         High        High         High        High  virginica
119         High         Low         High        High  virginica
120          Med         Low         High         Med  virginica
121         High         Med         High        High  virginica
122          Med         Low          Med        High  virginica
123         High         Low         High        High  virginica
124          Med         Low          Med        High  virginica
125          Med         Med         High        High  virginica
126         High         Med         High        High  virginica
127          Med         Low          Med        High  virginica
128          Med         Med          Med        High  virginica
129          Med         Low         High        High  virginica
130         High         Med         High         Med  virginica
131         High         Low         High        High  virginica
132         High        High         High        High  virginica
133          Med         Low         High        High  virginica
134          Med         Low         High         Med  virginica
135          Med         Low         High         Med  virginica
136         High         Med         High        High  virginica
137          Med         Med         High        High  virginica
138          Med         Med         High        High  virginica
139          Med         Med          Med        High  virginica
140         High         Med         High        High  virginica
141          Med         Med         High        High  virginica
142         High         Med         High        High  virginica
143          Med         Low         High        High  virginica
144         High         Med         High        High  virginica
145          Med         Med         High        High  virginica
146          Med         Med         High        High  virginica
147          Med         Low         High        High  virginica
148          Med         Med         High        High  virginica
149          Med         Med         High        High  virginica
150          Med         Med         High        High  virginica</code></pre>
</div>
</div>
<ul>
<li>Transforme la función en una función anónima (lambda) y úsela con <code>summarize</code> con los datos <code>iris</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">|&gt;</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric),<span class="at">.fns =</span> \(x) <span class="fu">cut</span>(x, <span class="dv">3</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'Bajo'</span>, <span class="st">'Medio'</span>, <span class="st">'Alto'</span>))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 150 × 5
# Groups:   Species [3]
   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
   &lt;fct&gt;        &lt;fct&gt;       &lt;fct&gt;        &lt;fct&gt;       &lt;fct&gt;  
 1 Medio        Medio       Medio        Bajo        setosa 
 2 Medio        Bajo        Medio        Bajo        setosa 
 3 Bajo         Medio       Bajo         Bajo        setosa 
 4 Bajo         Medio       Medio        Bajo        setosa 
 5 Medio        Medio       Medio        Bajo        setosa 
 6 Alto         Alto        Alto         Medio       setosa 
 7 Bajo         Medio       Medio        Medio       setosa 
 8 Medio        Medio       Medio        Bajo        setosa 
 9 Bajo         Bajo        Medio        Bajo        setosa 
10 Medio        Medio       Medio        Bajo        setosa 
# … with 140 more rows</code></pre>
</div>
</div>
<ul>
<li>Utilice la función para clasificar los set de datos <code>agromet</code> en todas las variables climáticas, salvo en <code>grados_dias</code> y <code>horas_frio</code>, use la función como anónima.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co">#api_agromet[3:11] |&gt; </span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  mutate(across(where(is.numeric)), na.rm = TRUE) |&gt; </span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  clasifica(na.rm=TRUE)</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="co">#api_agromet$station_id &lt;- as.factor(api_agromet$station_id)</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="co">#api_agromet[,-c(12,13)] |&gt; </span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="co">#  group_by(station_id) |&gt; </span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  mutate(across(3:10),.fn = \(x) cut(x, 3, labels = c('Bajo', 'Medio', 'Alto')),drop_na)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="coeficiente-de-variación" class="level3">
<h3 class="anchored" data-anchor-id="coeficiente-de-variación">Coeficiente de variación</h3>
<ul>
<li>Cree una función que permita seleccionar las variables numéricas cuyos valores son menores a un coeficiente de variación (CV) de 0.3 (30%).</li>
</ul>
<p><span class="math display">\[ CV = \frac{\sigma}{\bar{x}}\]</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>cvar <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">is.numeric</span>(x)){</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(x)</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    cov <span class="ot">&lt;-</span> <span class="fu">sd</span>(x)<span class="sc">/</span><span class="fu">mean</span>(x)</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>    out <span class="ot">&lt;-</span> cov <span class="sc">&lt;</span> <span class="fl">0.3</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> out <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Cree una función nombrada y apliquela a un vector aleatorio.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>vector4 <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">10</span>)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cvar</span>(vector4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Aplique la función con <code>apply</code> a las columnas numéricas del set de datos <code>iris</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(iris[,<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>], <span class="dv">2</span>, <span class="at">FUN =</span> cvar)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
        TRUE         TRUE        FALSE        FALSE </code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span> </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">|&gt;</span> </span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">apply</span>(<span class="dv">2</span>, <span class="at">FUN =</span> cvar)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
        TRUE         TRUE        FALSE        FALSE </code></pre>
</div>
</div>
<ul>
<li>Aplique la función con <code>where</code> para seleccionar columnas del set de datos <code>iris</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span> </span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(cvar))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sepal.Length Sepal.Width
1            5.1         3.5
2            4.9         3.0
3            4.7         3.2
4            4.6         3.1
5            5.0         3.6
6            5.4         3.9
7            4.6         3.4
8            5.0         3.4
9            4.4         2.9
10           4.9         3.1
11           5.4         3.7
12           4.8         3.4
13           4.8         3.0
14           4.3         3.0
15           5.8         4.0
16           5.7         4.4
17           5.4         3.9
18           5.1         3.5
19           5.7         3.8
20           5.1         3.8
21           5.4         3.4
22           5.1         3.7
23           4.6         3.6
24           5.1         3.3
25           4.8         3.4
26           5.0         3.0
27           5.0         3.4
28           5.2         3.5
29           5.2         3.4
30           4.7         3.2
31           4.8         3.1
32           5.4         3.4
33           5.2         4.1
34           5.5         4.2
35           4.9         3.1
36           5.0         3.2
37           5.5         3.5
38           4.9         3.6
39           4.4         3.0
40           5.1         3.4
41           5.0         3.5
42           4.5         2.3
43           4.4         3.2
44           5.0         3.5
45           5.1         3.8
46           4.8         3.0
47           5.1         3.8
48           4.6         3.2
49           5.3         3.7
50           5.0         3.3
51           7.0         3.2
52           6.4         3.2
53           6.9         3.1
54           5.5         2.3
55           6.5         2.8
56           5.7         2.8
57           6.3         3.3
58           4.9         2.4
59           6.6         2.9
60           5.2         2.7
61           5.0         2.0
62           5.9         3.0
63           6.0         2.2
64           6.1         2.9
65           5.6         2.9
66           6.7         3.1
67           5.6         3.0
68           5.8         2.7
69           6.2         2.2
70           5.6         2.5
71           5.9         3.2
72           6.1         2.8
73           6.3         2.5
74           6.1         2.8
75           6.4         2.9
76           6.6         3.0
77           6.8         2.8
78           6.7         3.0
79           6.0         2.9
80           5.7         2.6
81           5.5         2.4
82           5.5         2.4
83           5.8         2.7
84           6.0         2.7
85           5.4         3.0
86           6.0         3.4
87           6.7         3.1
88           6.3         2.3
89           5.6         3.0
90           5.5         2.5
91           5.5         2.6
92           6.1         3.0
93           5.8         2.6
94           5.0         2.3
95           5.6         2.7
96           5.7         3.0
97           5.7         2.9
98           6.2         2.9
99           5.1         2.5
100          5.7         2.8
101          6.3         3.3
102          5.8         2.7
103          7.1         3.0
104          6.3         2.9
105          6.5         3.0
106          7.6         3.0
107          4.9         2.5
108          7.3         2.9
109          6.7         2.5
110          7.2         3.6
111          6.5         3.2
112          6.4         2.7
113          6.8         3.0
114          5.7         2.5
115          5.8         2.8
116          6.4         3.2
117          6.5         3.0
118          7.7         3.8
119          7.7         2.6
120          6.0         2.2
121          6.9         3.2
122          5.6         2.8
123          7.7         2.8
124          6.3         2.7
125          6.7         3.3
126          7.2         3.2
127          6.2         2.8
128          6.1         3.0
129          6.4         2.8
130          7.2         3.0
131          7.4         2.8
132          7.9         3.8
133          6.4         2.8
134          6.3         2.8
135          6.1         2.6
136          7.7         3.0
137          6.3         3.4
138          6.4         3.1
139          6.0         3.0
140          6.9         3.1
141          6.7         3.1
142          6.9         3.1
143          5.8         2.7
144          6.8         3.2
145          6.7         3.3
146          6.7         3.0
147          6.3         2.5
148          6.5         3.0
149          6.2         3.4
150          5.9         3.0</code></pre>
</div>
</div>
<ul>
<li>Aplique la función al set de datos agromet en el que se filtraron los valores anómalos.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co">#api_agromet |&gt; </span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  mutate(across(everything(), anomalos,na.rm = TRUE)) |&gt; </span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  select(where(cvar))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="ejercicios-transformación-y-visualización" class="level2">
<h2 class="anchored" data-anchor-id="ejercicios-transformación-y-visualización">Ejercicios transformación y visualización</h2>
<section id="comparar-distribuciones" class="level3">
<h3 class="anchored" data-anchor-id="comparar-distribuciones">Comparar distribuciones</h3>
<ul>
<li>Compare las distribuciones de datos con y sin los valores anómalos obtenidas en el ejercicio 1.1. Agrúpe las estaciones por región de Chile.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>data_graf <span class="ot">&lt;-</span> api_agromet <span class="sc">|&gt;</span> </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dia =</span> <span class="fu">as_date</span>(fecha_hora)) <span class="sc">|&gt;</span> </span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(station_id, <span class="at">dia =</span> <span class="fu">as_date</span>(fecha_hora)) <span class="sc">|&gt;</span> </span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(temp_promedio_aire<span class="sc">:</span>temp_maxima,</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">.fns =</span> \(q) <span class="fu">sum</span>(<span class="fu">is.na</span>(q)),</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">.names =</span> <span class="st">'{.col}_nas'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'station_id'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>data_graf_longer <span class="ot">&lt;-</span> data_graf <span class="sc">|&gt;</span> </span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(temp_promedio_aire_nas<span class="sc">:</span>temp_maxima_nas)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_graf_longer, <span class="fu">aes</span>(dia, <span class="fu">as.factor</span>(station_id), <span class="at">fill =</span> value))<span class="sc">+</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(.<span class="sc">~</span>name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Taller-4_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Cree un gráfico para visualizar la densidad de distribución de la precipitación acumulada diaria para las diferentes regiones de Chile. Use gráfico de <code>densidad</code> (<code>geom_density</code>)</li>
</ul>
<div class="cell">

</div>
</section>
<section id="valores-anómalos" class="level3">
<h3 class="anchored" data-anchor-id="valores-anómalos">Valores anómalos</h3>
<ul>
<li>Visualice la cantidad de NAs implicitos diarios por estación para todas las variables de los datos <code>agromet</code>. Utilice gráficos de tipo heatmap (<code>geom_tile</code>).</li>
</ul>
<div class="cell">

</div>
<ul>
<li>Visualice la cantidad de NAs implicitos diarios por sesnor y profundidad para todas las variables del set de datos ordenados de <code>agv</code>. Utilice gráficos de tipo heatmap (<code>geom_tile</code>).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>cols <span class="ot">&lt;-</span> <span class="fu">sapply</span>(api_agv,ncol)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>vars <span class="ot">&lt;-</span> <span class="fu">sapply</span>(api_agv,nrow)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>vars_un<span class="ot">&lt;-</span> <span class="fu">unique</span>(vars)</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>ind7 <span class="ot">&lt;-</span> vars <span class="sc">%in%</span> <span class="dv">7</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>serial_est<span class="ot">&lt;-</span> agv_meta<span class="sc">$</span>serial[ind7]</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>data_sep <span class="ot">&lt;-</span> <span class="fu">lapply</span>(vars_un,<span class="cf">function</span>(x){</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>  api_agv[x <span class="sc">==</span> vars]</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">lapply</span>(data_sep[[<span class="dv">1</span>]],<span class="cf">function</span>(l){</span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>  out <span class="ot">&lt;-</span> l <span class="sc">|&gt;</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) <span class="co">#seleciona filas por indice o nombre</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>  out<span class="sc">$</span>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">90</span>,<span class="dv">60</span>,<span class="dv">30</span>)</span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(out)</span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="fu">seq_along</span>(a), <span class="cf">function</span>(i){</span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a>  out <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>(</span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a>    a[[i]] <span class="sc">|&gt;</span></span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a>      tidyr<span class="sc">::</span><span class="fu">unnest</span>(<span class="st">'data'</span>) <span class="sc">|&gt;</span></span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true" tabindex="-1"></a>      tidyr<span class="sc">::</span><span class="fu">hoist</span>(<span class="dv">3</span>,<span class="st">'value'</span>)<span class="sc">|&gt;</span></span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">5</span>) ,</span>
<span id="cb57-22"><a href="#cb57-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">error =</span> <span class="cf">function</span>(e) <span class="cn">NULL</span>)</span>
<span id="cb57-23"><a href="#cb57-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb57-24"><a href="#cb57-24" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(out)) out<span class="sc">$</span>serial <span class="ot">&lt;-</span> serial_est[i]</span>
<span id="cb57-25"><a href="#cb57-25" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.list</span>(out)) out <span class="ot">&lt;-</span> out <span class="sc">|&gt;</span> <span class="fu">unnest</span>(<span class="st">'value'</span>)</span>
<span id="cb57-26"><a href="#cb57-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(out)</span>
<span id="cb57-27"><a href="#cb57-27" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb57-28"><a href="#cb57-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-29"><a href="#cb57-29" aria-hidden="true" tabindex="-1"></a>agv_final<span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind,r)</span>
<span id="cb57-30"><a href="#cb57-30" aria-hidden="true" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'timestamp'</span>, <span class="st">'Valor'</span>, <span class="st">'Profundidad'</span>, <span class="st">'Serial'</span>)</span>
<span id="cb57-31"><a href="#cb57-31" aria-hidden="true" tabindex="-1"></a>names <span class="ot">-&gt;</span> <span class="fu">colnames</span>(agv_final)</span>
<span id="cb57-32"><a href="#cb57-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-33"><a href="#cb57-33" aria-hidden="true" tabindex="-1"></a>agv_final <span class="ot">&lt;-</span> <span class="fu">tibble</span>(agv_final)</span>
<span id="cb57-34"><a href="#cb57-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-35"><a href="#cb57-35" aria-hidden="true" tabindex="-1"></a>agv_graf <span class="ot">&lt;-</span> agv_final <span class="sc">|&gt;</span> </span>
<span id="cb57-36"><a href="#cb57-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fecha_hora =</span> <span class="fu">ymd_hm</span>(timestamp)) <span class="sc">|&gt;</span> </span>
<span id="cb57-37"><a href="#cb57-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">everything</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb57-38"><a href="#cb57-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="at">dia =</span> <span class="fu">as_date</span>(fecha_hora), Serial, Profundidad) <span class="sc">|&gt;</span> </span>
<span id="cb57-39"><a href="#cb57-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb57-40"><a href="#cb57-40" aria-hidden="true" tabindex="-1"></a>            <span class="at">NAs =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(Valor)),</span>
<span id="cb57-41"><a href="#cb57-41" aria-hidden="true" tabindex="-1"></a>            <span class="at">NAs_prop =</span> NAs<span class="sc">/</span>n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'dia', 'Serial'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(agv_graf, <span class="fu">aes</span>(dia, Serial, <span class="at">fill =</span> NAs)) <span class="sc">+</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(.<span class="sc">~</span>Profundidad) <span class="sc">+</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="fu">ymd</span>(<span class="dv">20220831</span>), <span class="fu">ymd</span>(<span class="dv">20220905</span>)), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 168 rows containing missing values (`geom_tile()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Taller-4_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="variación-variables" class="level3">
<h3 class="anchored" data-anchor-id="variación-variables">Variación variables</h3>
<ul>
<li>Visualice la variación de la temperatura media diaria para todo Chile. Use tipo de gráfico <code>boxplot</code> (<code>geom_boxplot</code>).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>regionA <span class="ot">&lt;-</span> api_agromet <span class="sc">|&gt;</span> </span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(station_id, <span class="at">dia =</span> <span class="fu">as_date</span>(fecha_hora)) <span class="sc">|&gt;</span> </span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">temp_prom =</span> <span class="fu">mean</span>(temp_promedio_aire, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(agromet_meta, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'station_id'</span> <span class="ot">=</span> <span class="st">'ema'</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(latitud))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'station_id'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>regionA <span class="sc">|&gt;</span> </span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(region, temp_prom)) <span class="sc">+</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 5131 rows containing non-finite values (`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Taller-4_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Cree un gráfico en ggplot para visualizar la variación de la temperatura media mensual para las diferentes regiones de Chile. Use tipo de gráfico <code>scatterplot</code> (<code>geom_point</code>) con barra de error (<code>geom_error_bar</code>).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>region <span class="ot">&lt;-</span> api_agromet <span class="sc">|&gt;</span> </span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(station_id, <span class="at">dia =</span> <span class="fu">as_date</span>(fecha_hora)) <span class="sc">|&gt;</span> </span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">temp_prom =</span> <span class="fu">mean</span>(temp_promedio_aire, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mes =</span> <span class="fu">floor_date</span>(dia, <span class="st">'1 month'</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(agromet_meta, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'station_id'</span> <span class="ot">=</span> <span class="st">'ema'</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(latitud))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'station_id'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>region <span class="ot">&lt;-</span> region[,<span class="sc">-</span><span class="dv">2</span>] <span class="sc">|&gt;</span> </span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(mes)</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>region <span class="sc">|&gt;</span> </span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(region, temp_prom, dia)) <span class="sc">+</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 5131 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Taller-4_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Cree una visualización para la variación latitudinal de la radiación solar mensual para el año 2021 a lo largo de Chile. Use tipo de gráfico <code>scatterplot</code> (<code>geom_point</code>) con barra de error (<code>geom_error_bar</code>).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co">#radsolar &lt;- api_agromet[c('station_id', 'fecha_hora', "radiacion_solar_max")]</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="co">#radsolar &lt;- api_agromet |&gt; </span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  group_by(station_id, dia = as_date(fecha_hora)) |&gt; </span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  summarise(rad_solar = mean(radiacion_solar_max, na.rm = TRUE)) |&gt; </span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  mutate(mes = floor_date(dia, '1 month')) |&gt; </span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a><span class="co">#  left_join(agromet_meta, by = c('station_id' = 'ema')) |&gt; </span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  arrange(desc(latitud))</span></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a><span class="co">#radsolar &lt;- radsolar |&gt; </span></span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a><span class="co">#  group_by(station_id, dia = as_date(fecha_hora)) |&gt; </span></span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a><span class="co">#  summarise(rad_solar = mean(radiacion_solar_max), na.rm = TRUE) |&gt; </span></span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a> <span class="co"># mutate(mes = floor_date(dia, '1 month')) |&gt; </span></span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a>  <span class="co">#left_join(agromet_meta, by = c('station_id' = 'ema'))</span></span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true" tabindex="-1"></a><span class="co">#radsolar |&gt; </span></span>
<span id="cb69-19"><a href="#cb69-19" aria-hidden="true" tabindex="-1"></a>  <span class="co">#ggplot(aes(radsolar, rad_solar))+</span></span>
<span id="cb69-20"><a href="#cb69-20" aria-hidden="true" tabindex="-1"></a>  <span class="co">#geom_point()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>